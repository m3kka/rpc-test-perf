// @generated by protoc-gen-es v1.5.1
// @generated from file envoy/config/tap/v3/common.proto (package envoy.config.tap.v3, syntax proto3)
/* eslint-disable */
// @ts-nocheck

import { Duration, proto3, UInt32Value } from "@bufbuild/protobuf";
import { MatchPredicate as MatchPredicate$1 } from "../../common/matcher/v3/matcher_pb.js";
import { RuntimeFractionalPercent } from "../../core/v3/base_pb.js";
import { HeaderMatcher } from "../../route/v3/route_components_pb.js";
import { GrpcService } from "../../core/v3/grpc_service_pb.js";

/**
 * Tap configuration.
 *
 * [#comment:TODO(mattklein123): Rate limiting]
 *
 * @generated from message envoy.config.tap.v3.TapConfig
 */
export const TapConfig = proto3.makeMessageType(
  "envoy.config.tap.v3.TapConfig",
  () => [
    { no: 1, name: "match_config", kind: "message", T: MatchPredicate },
    { no: 4, name: "match", kind: "message", T: MatchPredicate$1 },
    { no: 2, name: "output_config", kind: "message", T: OutputConfig },
    { no: 3, name: "tap_enabled", kind: "message", T: RuntimeFractionalPercent },
  ],
);

/**
 * Tap match configuration. This is a recursive structure which allows complex nested match
 * configurations to be built using various logical operators.
 * [#next-free-field: 11]
 *
 * @generated from message envoy.config.tap.v3.MatchPredicate
 */
export const MatchPredicate = proto3.makeMessageType(
  "envoy.config.tap.v3.MatchPredicate",
  () => [
    { no: 1, name: "or_match", kind: "message", T: MatchPredicate_MatchSet, oneof: "rule" },
    { no: 2, name: "and_match", kind: "message", T: MatchPredicate_MatchSet, oneof: "rule" },
    { no: 3, name: "not_match", kind: "message", T: MatchPredicate, oneof: "rule" },
    { no: 4, name: "any_match", kind: "scalar", T: 8 /* ScalarType.BOOL */, oneof: "rule" },
    { no: 5, name: "http_request_headers_match", kind: "message", T: HttpHeadersMatch, oneof: "rule" },
    { no: 6, name: "http_request_trailers_match", kind: "message", T: HttpHeadersMatch, oneof: "rule" },
    { no: 7, name: "http_response_headers_match", kind: "message", T: HttpHeadersMatch, oneof: "rule" },
    { no: 8, name: "http_response_trailers_match", kind: "message", T: HttpHeadersMatch, oneof: "rule" },
    { no: 9, name: "http_request_generic_body_match", kind: "message", T: HttpGenericBodyMatch, oneof: "rule" },
    { no: 10, name: "http_response_generic_body_match", kind: "message", T: HttpGenericBodyMatch, oneof: "rule" },
  ],
);

/**
 * A set of match configurations used for logical operations.
 *
 * @generated from message envoy.config.tap.v3.MatchPredicate.MatchSet
 */
export const MatchPredicate_MatchSet = proto3.makeMessageType(
  "envoy.config.tap.v3.MatchPredicate.MatchSet",
  () => [
    { no: 1, name: "rules", kind: "message", T: MatchPredicate, repeated: true },
  ],
  {localName: "MatchPredicate_MatchSet"},
);

/**
 * HTTP headers match configuration.
 *
 * @generated from message envoy.config.tap.v3.HttpHeadersMatch
 */
export const HttpHeadersMatch = proto3.makeMessageType(
  "envoy.config.tap.v3.HttpHeadersMatch",
  () => [
    { no: 1, name: "headers", kind: "message", T: HeaderMatcher, repeated: true },
  ],
);

/**
 * HTTP generic body match configuration.
 * List of text strings and hex strings to be located in HTTP body.
 * All specified strings must be found in the HTTP body for positive match.
 * The search may be limited to specified number of bytes from the body start.
 *
 * .. attention::
 *
 *   Searching for patterns in HTTP body is potentially cpu intensive. For each specified pattern, http body is scanned byte by byte to find a match.
 *   If multiple patterns are specified, the process is repeated for each pattern. If location of a pattern is known, ``bytes_limit`` should be specified
 *   to scan only part of the http body.
 *
 * @generated from message envoy.config.tap.v3.HttpGenericBodyMatch
 */
export const HttpGenericBodyMatch = proto3.makeMessageType(
  "envoy.config.tap.v3.HttpGenericBodyMatch",
  () => [
    { no: 1, name: "bytes_limit", kind: "scalar", T: 13 /* ScalarType.UINT32 */ },
    { no: 2, name: "patterns", kind: "message", T: HttpGenericBodyMatch_GenericTextMatch, repeated: true },
  ],
);

/**
 * @generated from message envoy.config.tap.v3.HttpGenericBodyMatch.GenericTextMatch
 */
export const HttpGenericBodyMatch_GenericTextMatch = proto3.makeMessageType(
  "envoy.config.tap.v3.HttpGenericBodyMatch.GenericTextMatch",
  () => [
    { no: 1, name: "string_match", kind: "scalar", T: 9 /* ScalarType.STRING */, oneof: "rule" },
    { no: 2, name: "binary_match", kind: "scalar", T: 12 /* ScalarType.BYTES */, oneof: "rule" },
  ],
  {localName: "HttpGenericBodyMatch_GenericTextMatch"},
);

/**
 * Tap output configuration.
 *
 * @generated from message envoy.config.tap.v3.OutputConfig
 */
export const OutputConfig = proto3.makeMessageType(
  "envoy.config.tap.v3.OutputConfig",
  () => [
    { no: 1, name: "sinks", kind: "message", T: OutputSink, repeated: true },
    { no: 2, name: "max_buffered_rx_bytes", kind: "message", T: UInt32Value },
    { no: 3, name: "max_buffered_tx_bytes", kind: "message", T: UInt32Value },
    { no: 4, name: "streaming", kind: "scalar", T: 8 /* ScalarType.BOOL */ },
  ],
);

/**
 * Tap output sink configuration.
 * [#next-free-field: 6]
 *
 * @generated from message envoy.config.tap.v3.OutputSink
 */
export const OutputSink = proto3.makeMessageType(
  "envoy.config.tap.v3.OutputSink",
  () => [
    { no: 1, name: "format", kind: "enum", T: proto3.getEnumType(OutputSink_Format) },
    { no: 2, name: "streaming_admin", kind: "message", T: StreamingAdminSink, oneof: "output_sink_type" },
    { no: 3, name: "file_per_tap", kind: "message", T: FilePerTapSink, oneof: "output_sink_type" },
    { no: 4, name: "streaming_grpc", kind: "message", T: StreamingGrpcSink, oneof: "output_sink_type" },
    { no: 5, name: "buffered_admin", kind: "message", T: BufferedAdminSink, oneof: "output_sink_type" },
  ],
);

/**
 * Output format. All output is in the form of one or more :ref:`TraceWrapper
 * <envoy_v3_api_msg_data.tap.v3.TraceWrapper>` messages. This enumeration indicates
 * how those messages are written. Note that not all sinks support all output formats. See
 * individual sink documentation for more information.
 *
 * @generated from enum envoy.config.tap.v3.OutputSink.Format
 */
export const OutputSink_Format = proto3.makeEnum(
  "envoy.config.tap.v3.OutputSink.Format",
  [
    {no: 0, name: "JSON_BODY_AS_BYTES"},
    {no: 1, name: "JSON_BODY_AS_STRING"},
    {no: 2, name: "PROTO_BINARY"},
    {no: 3, name: "PROTO_BINARY_LENGTH_DELIMITED"},
    {no: 4, name: "PROTO_TEXT"},
  ],
);

/**
 * Streaming admin sink configuration.
 *
 * @generated from message envoy.config.tap.v3.StreamingAdminSink
 */
export const StreamingAdminSink = proto3.makeMessageType(
  "envoy.config.tap.v3.StreamingAdminSink",
  [],
);

/**
 * BufferedAdminSink configures a tap output to collect traces without returning them until
 * one of multiple criteria are satisfied.
 * Similar to StreamingAdminSink, it is only allowed to specify the buffered admin output
 * sink if the tap is being configured from the ``/tap`` admin endpoint.
 *
 * @generated from message envoy.config.tap.v3.BufferedAdminSink
 */
export const BufferedAdminSink = proto3.makeMessageType(
  "envoy.config.tap.v3.BufferedAdminSink",
  () => [
    { no: 1, name: "max_traces", kind: "scalar", T: 4 /* ScalarType.UINT64 */ },
    { no: 2, name: "timeout", kind: "message", T: Duration },
  ],
);

/**
 * The file per tap sink outputs a discrete file for every tapped stream.
 *
 * @generated from message envoy.config.tap.v3.FilePerTapSink
 */
export const FilePerTapSink = proto3.makeMessageType(
  "envoy.config.tap.v3.FilePerTapSink",
  () => [
    { no: 1, name: "path_prefix", kind: "scalar", T: 9 /* ScalarType.STRING */ },
  ],
);

/**
 * [#not-implemented-hide:] Streaming gRPC sink configuration sends the taps to an external gRPC
 * server.
 *
 * @generated from message envoy.config.tap.v3.StreamingGrpcSink
 */
export const StreamingGrpcSink = proto3.makeMessageType(
  "envoy.config.tap.v3.StreamingGrpcSink",
  () => [
    { no: 1, name: "tap_id", kind: "scalar", T: 9 /* ScalarType.STRING */ },
    { no: 2, name: "grpc_service", kind: "message", T: GrpcService },
  ],
);

